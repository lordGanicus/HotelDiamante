<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hotel Diamante Azul - Indicador de Secciones</title>
    <style>
      :root {
        --primary-color: #012555;
        --accent-color: #00f7ff;
        --inactive-diamond: rgba(255, 255, 255, 0.3);
        --active-diamond: #00f7ff;
        --bar-width: 3px;
        --diamond-size: 18px;
        --diamond-margin: 22px;
        --animation-duration: 0.6s;
      }

      .section-indicator {
        position: fixed;
        left: 40px;
        top: 50%;
        transform: translateY(-50%);
        z-index: 100;
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        pointer-events: none;
      }

      .indicator-track {
        position: relative;
        height: calc(100% - 100px);
        width: var(--bar-width);
        background: rgba(255, 255, 255, 0.1);
        margin: 50px 0;
        overflow: visible;
      }

      .progress-line {
        position: absolute;
        width: 100%;
        background: var(--accent-color);
        top: 0;
        left: 0;
        height: 0;
        transition: height var(--animation-duration)
          cubic-bezier(0.22, 0.61, 0.36, 1);
        will-change: height;
        z-index: 1;
      }

      .diamonds-container {
        position: absolute;
        left: 0;
        top: 0;
        height: 100%;
        width: 100%;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        align-items: center;
        z-index: 2;
      }

      /* Estilo de diamante mejorado con forma de rombo pronunciada */
      .diamond {
        width: var(--diamond-size);
        height: var(--diamond-size);
        position: relative;
        cursor: pointer;
        pointer-events: auto;
        margin: var(--diamond-margin) 0;
        transform: rotate(45deg) scale(0.8);
        transition: all var(--animation-duration)
          cubic-bezier(0.22, 0.61, 0.36, 1);
        background: var(--inactive-diamond);
        border: 1px solid rgba(255, 255, 255, 0.4);
        box-shadow: 0 0 0 rgba(0, 247, 255, 0);
      }

      /* Efecto de diamante activo */
      .diamond.active {
        background: var(--active-diamond);
        box-shadow: 0 0 15px var(--active-diamond);
        transform: rotate(45deg) scale(1.1);
        border-color: var(--active-diamond);
      }

      /* Efecto de brillo interno */
      .diamond::before {
        content: "";
        position: absolute;
        top: 25%;
        left: 25%;
        width: 50%;
        height: 50%;
        background: rgba(255, 255, 255, 0.4);
        transform: rotate(45deg);
        transition: all var(--animation-duration) ease;
        opacity: 0;
      }

      .diamond.active::before {
        opacity: 1;
        background: rgba(255, 255, 255, 0.8);
      }

      /* Efecto de intersección */
      .intersection-effect {
        position: absolute;
        width: 24px;
        height: 24px;
        background: var(--accent-color);
        border-radius: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0);
        opacity: 0;
        box-shadow: 0 0 25px var(--accent-color);
        transition: transform 0.4s ease, opacity 0.4s ease;
        z-index: 3;
      }

      .intersection-effect.active {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0.7;
      }

      /* Partículas */
      .particles {
        position: absolute;
        width: 120px;
        height: 120px;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        z-index: 0;
      }

      .particle {
        position: absolute;
        width: 4px;
        height: 4px;
        background: var(--accent-color);
        border-radius: 50%;
        opacity: 0;
      }

      @keyframes floatParticle {
        0% {
          transform: translate(0, 0);
          opacity: 1;
        }
        100% {
          transform: translate(var(--random-x), var(--random-y));
          opacity: 0;
        }
      }

      /* Estilos para las secciones */
      section {
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: "Prata", serif;
        color: white;
        font-size: 3rem;
      }

      section:nth-child(odd) {
        background: #012555;
      }
      section:nth-child(even) {
        background: #001a3a;
      }
    </style>
    <link
      href="https://fonts.googleapis.com/css2?family=Prata&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Indicador de secciones -->
    <div class="section-indicator">
      <div class="indicator-track">
        <div class="progress-line" id="progressLine"></div>
        <div class="intersection-effect" id="intersectionEffect"></div>
        <div class="particles" id="particles"></div>
        <div class="diamonds-container" id="diamondsContainer"></div>
      </div>
    </div>

    <!-- Secciones -->
    <section id="section1">Inicio</section>
    <section id="section2">Información</section>
    <section id="section3">Habitaciones</section>
    <section id="section4">Paquetes</section>
    <section id="section5">Desayunos</section>
    <section id="section6">Ubicación</section>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Configuración
        const sections = document.querySelectorAll("section");
        const sectionCount = sections.length;
        let currentActiveSection = 0;
        let isScrolling = false;
        let scrollTimeout;
        let diamondPositions = [];

        // Elementos del indicador
        const diamondsContainer = document.getElementById("diamondsContainer");
        const progressLine = document.getElementById("progressLine");
        const intersectionEffect =
          document.getElementById("intersectionEffect");
        const particlesContainer = document.getElementById("particles");

        // Crear diamantes y calcular sus posiciones
        sections.forEach((section, index) => {
          const diamond = document.createElement("div");
          diamond.className = "diamond";
          diamond.dataset.section = index;

          diamond.addEventListener("click", (e) => {
            e.preventDefault();
            scrollToSection(index);
          });

          diamondsContainer.appendChild(diamond);
        });

        // Calcular posiciones de los diamantes
        setTimeout(() => {
          const diamonds = document.querySelectorAll(".diamond");
          const containerRect = diamondsContainer.getBoundingClientRect();

          diamonds.forEach((diamond) => {
            const rect = diamond.getBoundingClientRect();
            const position =
              (rect.top + rect.height / 2 - containerRect.top) /
              containerRect.height;
            diamondPositions.push(position);
          });

          // Inicializar
          updateProgress(0);
          setActiveSection(0);
        }, 100);

        // Evento de scroll mejorado
        window.addEventListener("scroll", function () {
          if (!isScrolling) {
            clearTimeout(scrollTimeout);
            scrollTimeout = setTimeout(handleScroll, 50);
          }
        });

        // Manejar scroll
        function handleScroll() {
          const scrollPosition = window.scrollY + window.innerHeight / 3;

          // Determinar sección actual
          sections.forEach((section, index) => {
            const sectionTop = section.offsetTop;
            const sectionBottom = sectionTop + section.offsetHeight;

            if (
              scrollPosition >= sectionTop &&
              scrollPosition < sectionBottom
            ) {
              if (currentActiveSection !== index) {
                currentActiveSection = index;
                setActiveSection(index);
              }

              // Calcular progreso dentro de la sección
              const progressInSection =
                (scrollPosition - sectionTop) / section.offsetHeight;
              updateProgress(index, progressInSection);
            }
          });
        }

        // Scroll a sección específica
        function scrollToSection(index) {
          isScrolling = true;
          currentActiveSection = index;

          window.scrollTo({
            top: sections[index].offsetTop,
            behavior: "smooth",
          });

          setTimeout(() => {
            isScrolling = false;
          }, 1000);
        }

        // Actualizar progreso de la línea
        function updateProgress(sectionIndex, progress = 1) {
          if (diamondPositions.length === 0) return;

          // Calcular altura de la línea de progreso
          let targetHeight;

          if (sectionIndex === sections.length - 1) {
            targetHeight = 100;
          } else {
            const currentPos = diamondPositions[sectionIndex];
            const nextPos = diamondPositions[sectionIndex + 1];
            targetHeight =
              (currentPos + (nextPos - currentPos) * progress) * 100;
          }

          progressLine.style.height = `${targetHeight}%`;

          // Efecto al cambiar de sección
          if (progress === 1 && sectionIndex !== currentActiveSection) {
            intersectionEffect.style.top = `${
              diamondPositions[sectionIndex] * 100
            }%`;
            intersectionEffect.classList.add("active");
            setTimeout(() => {
              intersectionEffect.classList.remove("active");
            }, 800);

            createParticles();
          }
        }

        // Establecer sección activa
        function setActiveSection(index) {
          const diamonds = document.querySelectorAll(".diamond");
          diamonds.forEach((d) => d.classList.remove("active"));
          diamonds[index].classList.add("active");
        }

        // Crear partículas
        function createParticles() {
          particlesContainer.innerHTML = "";

          for (let i = 0; i < 15; i++) {
            const particle = document.createElement("div");
            particle.className = "particle";

            const angle = Math.random() * Math.PI * 2;
            const distance = Math.random() * 40 + 20;
            const x = Math.cos(angle) * distance;
            const y = Math.sin(angle) * distance;

            particle.style.setProperty("--random-x", `${x}px`);
            particle.style.setProperty("--random-y", `${y}px`);

            const delay = Math.random() * 0.3;
            const duration = Math.random() * 0.8 + 0.4;

            particle.style.animation = `floatParticle ${duration}s ease-out ${delay}s forwards`;
            particlesContainer.appendChild(particle);
          }
        }

        // Ajustar inicialmente
        window.addEventListener("load", () => {
          updateProgress(0);
        });
      });
    </script>
  </body>
</html>
